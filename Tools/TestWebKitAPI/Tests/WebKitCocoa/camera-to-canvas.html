<!DOCTYPE html>
<html>
<head>
    <script>
async function startCamera()
{
    local.srcObject = await navigator.mediaDevices.getUserMedia({ video:true });
    local.play();
}

async function paintCameraInCanvas()
{
    await local.play();
    canvas.getContext('2d').fillStyle = "#FFFFFF";
    canvas.getContext('2d').fillRect(0, 0, 640, 480);
    canvas.getContext('2d').drawImage(local, 0, 0, 640, 480);
    const pixelData = canvas.getContext('2d').getImageData(0, 0, 1, 1,).data;

    if (pixelData[0] != 0)
        throw "r is not 0";

    if (pixelData[1] != 0)
        throw "r is not 0";

    if (pixelData[2] != 0)
        throw "r is not 0";

    return true;
}
    </script>
</head>
<body onload="startCamera()">
    <video controls autoplay playsinline muted id="local"></video>
    <br>
    <canvas width="640" height="480" id=canvas></video>
</body>
</html>
